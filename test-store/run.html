<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Running Checkout…</title>
</head>
<body>
<h1>Processing Your Cart…</h1>
<p>Please wait while we add all your items to the VE cart.</p>

<script>
const items = JSON.parse(localStorage.getItem("checkoutItems") || "[]");
const step = parseInt(new URLSearchParams(location.search).get("step") || "0");

if (step < items.length) {
    const item = items[step];
    // Navigate to VE buy button URL (must be real navigation)
    window.location.href = item.url + "?redirect=run.html?step=" + (step+1);
} else {
    // All items added → go to final cart
    localStorage.removeItem("checkoutItems");
    window.location.href = "https://portal.veinternational.org/buybuttons/us019814/cart/";
}
</script>
</body>
</html>
